(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{17:function(t,e){t.exports=function(t){var e={};function n(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(s,o,function(e){return t[e]}.bind(null,o));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"1eb2":function(t,e,n){"use strict";var s;"undefined"!=typeof window&&((s=window.document.currentScript)&&(s=s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=s[1]))},2877:function(t,e,n){"use strict";function s(t,e,n,s,o,i,r,a){var u,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),s&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=u):o&&(u=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return s}))},"407a":function(t,e,n){"use strict";n.r(e);var s=n("b445"),o=n("fa1f");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);var r=n("2877"),a=Object(r.a)(o.default,s.a,s.b,!1,null,null,null);a.options.__file="hcaptcha.vue",e.default=a.exports},"56d7":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.install=i,e.default=void 0;var s,o=(s=n("407a"))&&s.__esModule?s:{default:s};function i(t){i.installed||(i.installed=!0,t.component("vuehcaptcha",o.default),t.component("VueHcaptcha",o.default))}var r={install:i},a=null;"undefined"!=typeof window?a=window.Vue:void 0!==t&&(a=t.Vue),a&&a.use(r);var u=o.default;e.default=u}).call(this,n("c8ba"))},"7c22":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n("dfcd"),o={name:"VueHcaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String,default:void 0},size:{type:String,default:void 0},tabindex:{type:String,default:void 0},language:{type:String,default:void 0},reCaptchaCompat:{type:Boolean,default:!0},challengeContainer:{type:String,default:void 0},rqdata:{type:String,default:void 0},sentry:{type:Boolean,default:!0},apiEndpoint:{type:String,default:"https://hcaptcha.com/1/api.js"},endpoint:{type:String,default:void 0},reportapi:{type:String,default:void 0},assethost:{type:String,default:void 0},imghost:{type:String,default:void 0}},data:function(){return{widgetId:null,hcaptcha:null}},mounted:function(){return(0,s.loadApiEndpointIfNotAlready)(this.$props).then(this.onApiLoaded).catch(this.onError)},unmounted:function(){var t=this;this.widgetId&&this.hcaptcha.then((function(){t.hcaptcha.reset(t.widgetId),t.hcaptcha.remove(t.widgetId)}))},methods:{onApiLoaded:function(){this.hcaptcha=window.hcaptcha;var t={sitekey:this.sitekey,theme:this.theme,size:this.size,tabindex:this.tabindex,callback:this.onVerify,"expired-callback":this.onExpired,"chalexpired-callback":this.onChallengeExpired,"error-callback":this.onError,"open-callback":this.onOpen,"close-callback":this.onClose};this.challengeContainer&&(t["challenge-container"]=this.challengeContainer),this.widgetId=this.hcaptcha.render(this.$el,t),this.rqdata&&this.hcaptcha.setData(this.widgetId,{rqdata:this.rqdata}),this.onRendered()},execute:function(){this.widgetId?(this.hcaptcha.execute(this.widgetId),this.onExecuted()):this.$on("rendered",this.execute)},reset:function(){this.widgetId?(this.hcaptcha.reset(this.widgetId),this.onReset()):this.$emit("error","Element is not rendered yet and thus cannot reset it. Wait for `rendered` event to safely call reset.")},onRendered:function(){this.$emit("rendered")},onExecuted:function(){this.$emit("executed")},onReset:function(){this.$emit("reset")},onError:function(t){this.$emit("error",t),this.reset()},onVerify:function(){var t=this.hcaptcha.getResponse(this.widgetId),e=this.hcaptcha.getRespKey(this.widgetId);this.$emit("verify",t,e)},onExpired:function(){this.$emit("expired")},onChallengeExpired:function(){this.$emit("challengeExpired")},onOpen:function(){this.$emit("opened")},onClose:function(){this.$emit("closed")}}};e.default=o},b445:function(t,e,n){"use strict";var s=function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"hcap-script"}})},o=[];n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o}))},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},dfcd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadApiEndpointIfNotAlready=function(t){if(window.hcaptcha)return o(),r;if(document.getElementById(s))return r;window._hcaptchaOnLoad=o;var e=a(t),n=document.createElement("script");return n.id=s,n.src=e,n.async=!0,n.defer=!0,n.onerror=function(t){console.error("Failed to load api: "+e,t),i("Failed to load api.js")},document.head.appendChild(n),r},e.getScriptSrc=a,e.addQueryParamIfDefined=u,e.SCRIPT_ID=void 0;var s="hcaptcha-api-script-id";e.SCRIPT_ID=s;var o,i,r=new Promise((function(t,e){o=t,i=e}));function a(t){var e=t.apiEndpoint;return e=u(e,"render","explicit"),e=u(e,"onload","_hcaptchaOnLoad"),e=u(e,"recaptchacompat",!1===t.reCaptchaCompat?"off":null),e=u(e,"hl",t.language),e=u(e,"sentry",t.sentry),e=u(e,"endpoint",t.endpoint),e=u(e,"assethost",t.assethost),e=u(e,"imghost",t.imghost),e=u(e,"reportapi",t.reportapi)}function u(t,e,n){if(null!=n){var s=t.includes("?")?"&":"?";return t+s+e+"="+encodeURIComponent(n)}return t}},fa1f:function(t,e,n){"use strict";n.r(e);var s=n("7c22"),o=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e.default=o.a},fb15:function(t,e,n){"use strict";n.r(e);n("1eb2");var s=n("56d7"),o=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);e.default=o.a}})},18:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));var s=n(8),o=n.n(s),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong!";return o.a.fire({title:"Oops!",text:t,icon:"error"})},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Action successfuly finished!";return o.a.fire({title:"Success!",text:t,icon:"success"})}},26:function(t,e,n){"use strict";n.r(e);var s=n(0),o=n.n(s),i=n(3),r=n.n(i),a=n(4),u=n(18),c=n(8),l=n.n(c),d={name:"Card",middleware:"guest",props:{status:{type:String,default:null},sendEmail:{type:Function},form:{type:FormData}},components:{},computed:Object(a.b)({forgotPassSecurityQuestions:"forgot-pass-security-question/forgotPassSecurityQuestions",forgotPassSecurityQuestionForm:"forgot-pass-security-question/forgotPassSecurityQuestionForm"}),methods:{submit:function(){var t=this;this.$store.dispatch("forgot-pass-security-question/checkUserSecurityQuestion").then((function(e){var n=e.success,s=e.message;n?t.sendEmail().then((function(e){l.a.fire({title:"Success",text:e.status,type:"success"}).then((function(){t.$router.push({name:"login"})}))})):Object(u.a)(s)})).catch((function(t){return Object(u.a)(t)}))}}},f=n(1),p=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)},keydown:function(e){return t.forgotPassSecurityQuestionForm.onKeydown(e)}}},[n("div",{staticClass:"form-group col-md-7 mx-auto"},[n("label",[t._v("Question")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.forgotPassSecurityQuestionForm.question_id,expression:"forgotPassSecurityQuestionForm.question_id"}],staticClass:"form-control",attrs:{type:"text",name:"question",required:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.forgotPassSecurityQuestionForm,"question_id",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("Select Question")]),t._v(" "),t._l(t.forgotPassSecurityQuestions,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                "+t._s(e.security_question.question)+"\n              ")])}))],2)]),t._v(" "),n("div",{staticClass:"form-group col-md-7 mx-auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.forgotPassSecurityQuestionForm.answer,expression:"forgotPassSecurityQuestionForm.answer"}],staticClass:"form-control",attrs:{type:"text",name:"answer_1"},domProps:{value:t.forgotPassSecurityQuestionForm.answer},on:{input:function(e){e.target.composing||t.$set(t.forgotPassSecurityQuestionForm,"answer",e.target.value)}}}),t._v(" "),n("has-error",{attrs:{form:t.form,field:"answer_1"}})],1),t._v(" "),n("div",{staticClass:"form-group row col-md-7 mx-auto mt-3"},[n("div",{staticClass:"col-md-12 px-0"},[n("v-button",{staticClass:"btn btn-primary w-100",attrs:{loading:t.form.busy}},[t._v("\n                Submit\n            ")])],1)])])])}),[],!1,null,null,null).exports,m=n(17);function h(t,e,n,s,o,i,r){try{var a=t[i](r),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(s,o)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(s,o){var i=t.apply(e,n);function r(t){h(i,s,o,r,a,"next",t)}function a(t){h(i,s,o,r,a,"throw",t)}r(void 0)}))}}var y={layout:"auth",middleware:"guest",metaInfo:function(){return{title:this.$t("reset_password")}},components:{VueHcaptcha:n.n(m).a,SecurityQuestion:p},computed:Object(a.b)({forgotPassSecurityQuestionForm:"forgot-pass-security-question/forgotPassSecurityQuestionForm"}),data:function(){return{status:"",successStatus:"",form:new r.a({email:"",username:""}),token:null,srcLogoOnly:window.config.assetURL+"images/sample-logo.png",step:0,statusAction:"enter-email",securityType:""}},methods:{prev:function(){this.step--},next:function(){var t=this;this.form.post("/api/user/validate-email").then((function(e){null!==e.data.data?(t.step++,t.status=""):t.status="Email doesn't exist"}))},validateEmail:function(){return!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(this.form.email)},setMethod:function(t){"scq"===t&&(this.forgotPassSecurityQuestionForm.email=this.form.email,this.$store.dispatch("forgot-pass-security-question/fetchUserSecurityQuestions")),this.securityType=t,this.step++},send:function(){var t=this;return v(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:2===t.step&&t.form.post("/api/user/validate-username").then((function(e){null!==e.data.data?(t.status="",t.sendEmail()):t.status=e.data.message}));case 1:case"end":return e.stop()}}),e)})))()},sendEmail:function(){var t=this;return v(o.a.mark((function e(){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.form.post("/api/password/email");case 2:n=e.sent,s=n.data,t.form.reset(),t.token=null,l.a.fire({title:"Success",text:s.status,type:"success"}).then((function(){t.$router.push({name:"login"})}));case 7:case"end":return e.stop()}}),e)})))()},isVerified:function(t){this.token=t}}},g=Object(f.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row h-100"},["enter-email"==t.statusAction?n("div",{staticClass:"col-lg-12 m-auto"},[n("div",[n("div",{staticClass:"w-100 text-center mt-2 mb-4"},[n("img",{staticClass:"img-fluid col-12 col-lg-4",staticStyle:{"mix-blend-mode":"luminosity"},attrs:{src:t.srcLogoOnly,srcset:""}}),t._v(" "),n("hr",{staticClass:"mx-auto line-form-break"}),t._v(" "),n("h4",[t._v("Forgot Password")])]),t._v(" "),n("form",{on:{submit:function(e){return e.preventDefault(),t.send(e)},keydown:function(e){return t.form.onKeydown(e)}}},[t.status?n("div",{staticClass:" col-md-7 mx-auto"},[n("div",{staticClass:"alert alert-danger alert-dismissible fade show",attrs:{role:"alert"}},[t._v("\n            "+t._s(t.status)+".\n            "),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.status=""}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])]):t._e(),t._v(" "),t.successStatus?n("div",{staticClass:" col-md-7 mx-auto"},[n("div",{staticClass:"alert alert-success alert-dismissible fade show",attrs:{role:"alert"}},[t._v("\n            "+t._s(t.successStatus)+".\n            "),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.successStatus=""}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])]):t._e(),t._v(" "),0===t.step?n("div",[n("div",{staticClass:"form-group col-md-7 mx-auto"},[n("label",[t._v(t._s(t.$t("email")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("email")},attrs:{type:"text",name:"email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),n("has-error",{attrs:{form:t.form,field:"email"}})],1),t._v(" "),n("div",{staticClass:"form-group row col-md-7 mx-auto mt-3"},[n("div",{staticClass:"col-md-6 px-0 pr-lg-1"},[n("router-link",{attrs:{to:"/login"}},[n("button",{staticClass:"btn btn-secondary w-100",attrs:{type:"button"}},[t._v("\n                  Cancel\n                ")])])],1),t._v(" "),n("div",{staticClass:"col-md-6 px-0 pl-lg-1"},[n("button",{staticClass:"btn btn-primary w-100",attrs:{type:"button",disabled:t.validateEmail()},on:{click:function(e){return e.preventDefault(),t.next()}}},[t._v("\n                  Next\n                ")])])])]):t._e(),t._v(" "),1===t.step?n("div",[n("div",{staticClass:"form-group row col-md-7 mx-auto mt-3"},[n("label",[t._v("Please Choose a Security Challenge Method")]),t._v(" "),n("div",{staticClass:"col-md-12 px-0 mb-2"},[n("button",{staticClass:"btn btn-secondary w-100",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.setMethod("scq")}}},[t._v("\n                  Security Questions\n                ")])]),t._v(" "),n("div",{staticClass:"col-md-12 px-0"},[n("button",{staticClass:"btn btn-primary w-100",attrs:{type:"button",disabled:""===t.form.email},on:{click:function(e){return e.preventDefault(),t.setMethod("usc")}}},[t._v("\n                  Username Confirmation\n                ")])])])]):t._e(),t._v(" "),2===t.step?n("div",["scq"===t.securityType?n("div",[n("SecurityQuestion",{attrs:{status:t.successStatus,sendEmail:t.sendEmail,form:t.form}})],1):n("div",[n("div",{staticClass:"form-group col-md-7 mx-auto"},[n("label",[t._v("Username")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("username")},attrs:{type:"text",name:"username"},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}}),t._v(" "),n("has-error",{attrs:{form:t.form,field:"username"}})],1),t._v(" "),n("div",{staticClass:"form-group row col-md-7 mx-auto mt-3"},[n("div",{staticClass:"col-md-12 px-0"},[n("v-button",{staticClass:"btn btn-primary w-100",attrs:{type:"button",loading:t.form.busy,disabled:""===t.form.username}},[t._v("\n                    Submit\n                  ")])],1)])])]):t._e()])])]):t._e()])}),[],!1,null,null,null);e.default=g.exports}}]);