(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{17:function(t,e){t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"1eb2":function(t,e,n){"use strict";var o;"undefined"!=typeof window&&((o=window.document.currentScript)&&(o=o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=o[1]))},2877:function(t,e,n){"use strict";function o(t,e,n,o,r,i,a,s){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),o&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=c):r&&(c=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(u.functional){u._injectStyles=c;var d=u.render;u.render=function(t,e){return c.call(e),d(t,e)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,c):[c]}return{exports:t,options:u}}n.d(e,"a",(function(){return o}))},"407a":function(t,e,n){"use strict";n.r(e);var o=n("b445"),r=n("fa1f");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);var a=n("2877"),s=Object(a.a)(r.default,o.a,o.b,!1,null,null,null);s.options.__file="hcaptcha.vue",e.default=s.exports},"56d7":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.install=i,e.default=void 0;var o,r=(o=n("407a"))&&o.__esModule?o:{default:o};function i(t){i.installed||(i.installed=!0,t.component("vuehcaptcha",r.default),t.component("VueHcaptcha",r.default))}var a={install:i},s=null;"undefined"!=typeof window?s=window.Vue:void 0!==t&&(s=t.Vue),s&&s.use(a);var c=r.default;e.default=c}).call(this,n("c8ba"))},"7c22":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("dfcd"),r={name:"VueHcaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String,default:void 0},size:{type:String,default:void 0},tabindex:{type:String,default:void 0},language:{type:String,default:void 0},reCaptchaCompat:{type:Boolean,default:!0},challengeContainer:{type:String,default:void 0},rqdata:{type:String,default:void 0},sentry:{type:Boolean,default:!0},apiEndpoint:{type:String,default:"https://hcaptcha.com/1/api.js"},endpoint:{type:String,default:void 0},reportapi:{type:String,default:void 0},assethost:{type:String,default:void 0},imghost:{type:String,default:void 0}},data:function(){return{widgetId:null,hcaptcha:null}},mounted:function(){return(0,o.loadApiEndpointIfNotAlready)(this.$props).then(this.onApiLoaded).catch(this.onError)},unmounted:function(){var t=this;this.widgetId&&this.hcaptcha.then((function(){t.hcaptcha.reset(t.widgetId),t.hcaptcha.remove(t.widgetId)}))},methods:{onApiLoaded:function(){this.hcaptcha=window.hcaptcha;var t={sitekey:this.sitekey,theme:this.theme,size:this.size,tabindex:this.tabindex,callback:this.onVerify,"expired-callback":this.onExpired,"chalexpired-callback":this.onChallengeExpired,"error-callback":this.onError,"open-callback":this.onOpen,"close-callback":this.onClose};this.challengeContainer&&(t["challenge-container"]=this.challengeContainer),this.widgetId=this.hcaptcha.render(this.$el,t),this.rqdata&&this.hcaptcha.setData(this.widgetId,{rqdata:this.rqdata}),this.onRendered()},execute:function(){this.widgetId?(this.hcaptcha.execute(this.widgetId),this.onExecuted()):this.$on("rendered",this.execute)},reset:function(){this.widgetId?(this.hcaptcha.reset(this.widgetId),this.onReset()):this.$emit("error","Element is not rendered yet and thus cannot reset it. Wait for `rendered` event to safely call reset.")},onRendered:function(){this.$emit("rendered")},onExecuted:function(){this.$emit("executed")},onReset:function(){this.$emit("reset")},onError:function(t){this.$emit("error",t),this.reset()},onVerify:function(){var t=this.hcaptcha.getResponse(this.widgetId),e=this.hcaptcha.getRespKey(this.widgetId);this.$emit("verify",t,e)},onExpired:function(){this.$emit("expired")},onChallengeExpired:function(){this.$emit("challengeExpired")},onOpen:function(){this.$emit("opened")},onClose:function(){this.$emit("closed")}}};e.default=r},b445:function(t,e,n){"use strict";var o=function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"hcap-script"}})},r=[];n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}))},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},dfcd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadApiEndpointIfNotAlready=function(t){if(window.hcaptcha)return r(),a;if(document.getElementById(o))return a;window._hcaptchaOnLoad=r;var e=s(t),n=document.createElement("script");return n.id=o,n.src=e,n.async=!0,n.defer=!0,n.onerror=function(t){console.error("Failed to load api: "+e,t),i("Failed to load api.js")},document.head.appendChild(n),a},e.getScriptSrc=s,e.addQueryParamIfDefined=c,e.SCRIPT_ID=void 0;var o="hcaptcha-api-script-id";e.SCRIPT_ID=o;var r,i,a=new Promise((function(t,e){r=t,i=e}));function s(t){var e=t.apiEndpoint;return e=c(e,"render","explicit"),e=c(e,"onload","_hcaptchaOnLoad"),e=c(e,"recaptchacompat",!1===t.reCaptchaCompat?"off":null),e=c(e,"hl",t.language),e=c(e,"sentry",t.sentry),e=c(e,"endpoint",t.endpoint),e=c(e,"assethost",t.assethost),e=c(e,"imghost",t.imghost),e=c(e,"reportapi",t.reportapi)}function c(t,e,n){if(null!=n){var o=t.includes("?")?"&":"?";return t+o+e+"="+encodeURIComponent(n)}return t}},fa1f:function(t,e,n){"use strict";n.r(e);var o=n("7c22"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e.default=r.a},fb15:function(t,e,n){"use strict";n.r(e);n("1eb2");var o=n("56d7"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e.default=r.a}})},19:function(t,e,n){"use strict";var o=n(0),r=n.n(o);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e,n,o,r,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===c(t)&&(n=t,t=""),n=a({url:t,title:e,width:600,height:720},n);var o=void 0!==window.screenLeft?window.screenLeft:window.screen.left,r=void 0!==window.screenTop?window.screenTop:window.screen.top,i=window.innerWidth||document.documentElement.clientWidth||window.screen.width,s=window.innerHeight||document.documentElement.clientHeight||window.screen.height;n.left=i/2-n.width/2+o,n.top=s/2-n.height/2+r;var u=Object.keys(n).reduce((function(t,e){return t.push("".concat(e,"=").concat(n[e])),t}),[]).join(","),d=window.open(t,e,u);return window.focus&&d.focus(),d}var l={name:"LoginWithGithub",computed:{githubAuth:function(){return window.config.githubAuth},url:function(){return"/api/oauth/github"}},mounted:function(){window.addEventListener("message",this.onMessage,!1)},beforeDestroy:function(){window.removeEventListener("message",this.onMessage)},methods:{login:function(){var t,e=this;return(t=r.a.mark((function t(){var n,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d("",e.$t("login")),t.next=3,e.$store.dispatch("auth/fetchOauthUrl",{provider:"github"});case 3:o=t.sent,n.location.href=o;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(t){u(i,o,r,a,s,"next",t)}function s(t){u(i,o,r,a,s,"throw",t)}a(void 0)}))})()},onMessage:function(t){t.origin===window.origin&&t.data.token&&(this.$store.dispatch("auth/saveToken",{token:t.data.token}),this.$router.push({name:"home"}))}}},f=n(1),h=Object(f.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return this.githubAuth?e("button",{staticClass:"btn btn-dark ml-auto",attrs:{type:"button"},on:{click:this.login}},[this._v("\n  "+this._s(this.$t("login_with"))+"\n  "),e("fa",{attrs:{icon:["fab","github"]}})],1):this._e()}),[],!1,null,null,null);e.a=h.exports},29:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i=n(3),a=n.n(i),s=n(19),c=n(17),u=n.n(c);function d(t,e,n,o,r,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}var l={layout:"auth",middleware:"guest",components:{LoginWithGithub:s.a,VueHcaptcha:u.a},metaInfo:function(){return{title:this.$t("login")}},data:function(){return{form:new a.a({email:"",password:""}),token:"",captchaDisabled:!0,srcLogoOnly:window.config.assetURL+"images/sample-logo.png",remember:!1}},methods:{login:function(){var t,e=this;return(t=r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("test"),t.next=3,e.form.post("/api/login").then((function(t){console.log(t),e.token=t.data.token})).catch((function(t){switch(console.log(),t.response.status){case 429:e.captchaDisabled=!1;break;default:e.token="",e.captchaDisabled=!0}}));case 3:return e.$store.dispatch("auth/saveToken",{token:e.token,remember:e.remember}),t.next=6,e.$store.dispatch("auth/fetchUser");case 6:e.$router.push({name:"home"});case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(t){d(i,o,r,a,s,"next",t)}function s(t){d(i,o,r,a,s,"throw",t)}a(void 0)}))})()},isVerified:function(t){this.token=t}}},f=n(1),h=Object(f.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row h-100"},[n("div",{staticClass:"col-lg-12 m-auto"},[n("div",[n("div",{staticClass:"w-100 text-center mt-2 mb-4"},[n("img",{staticClass:"img-fluid col-12 col-lg-4",staticStyle:{"mix-blend-mode":"luminosity"},attrs:{src:t.srcLogoOnly,srcset:""}}),t._v(" "),n("hr",{staticClass:"mx-auto line-form-break"}),t._v(" "),n("h4",[t._v("Log in")])]),t._v(" "),n("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)},keydown:function(e){return t.form.onKeydown(e)}}},[n("div",{staticClass:"form-group col-md-7 mx-auto"},[n("label",[t._v("Username")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("email")},attrs:{type:"text",name:"email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),n("has-error",{attrs:{form:t.form,field:"email"}})],1),t._v(" "),n("div",{staticClass:"form-group col-md-7 mx-auto"},[n("label",{attrs:{for:"exampleInputEmail1"}},[t._v(t._s(t.$t("password")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("password")},attrs:{type:"password",name:"password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),n("has-error",{attrs:{form:t.form,field:"password"}})],1),t._v(" "),n("div",{staticClass:"form-group row no-gutters col-md-7 mx-auto"},[n("div",{staticClass:"col-md-12 d-flex"},[n("checkbox",{attrs:{name:"remember"},model:{value:t.remember,callback:function(e){t.remember=e},expression:"remember"}},[t._v("\n              "+t._s(t.$t("remember_me"))+"\n            ")]),t._v(" "),n("router-link",{staticClass:"small ml-auto my-auto",attrs:{to:{name:"password.request"}}},[t._v("\n              "+t._s(t.$t("forgot_password"))+"\n            ")])],1)]),t._v(" "),t.captchaDisabled?t._e():n("div",{staticClass:"form-group row col-md-7 mx-auto"},[n("div",{staticClass:"col-md-12 px-0"},[n("vue-hcaptcha",{attrs:{sitekey:"3f7f821f-05b7-486b-a3d9-21395609a73e"},on:{verify:t.isVerified}})],1)]),t._v(" "),n("div",{staticClass:"form-group row col-md-7 mx-auto mt-3"},[n("div",{staticClass:"col-md-12 px-0"},[n("v-button",{staticClass:"btn btn-primary w-100",attrs:{disabled:!t.captchaDisabled&&!t.token,loading:t.form.busy}},[t._v("\n              "+t._s(t.$t("login"))+"\n            ")]),t._v(" "),n("login-with-github")],1)])])])])])}),[],!1,null,null,null);e.default=h.exports}}]);